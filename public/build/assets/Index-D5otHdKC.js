import{_ as H,q as _,j as J,z as d,g as z,o as p,a as t,w as s,b as l,f as n,t as c,c as A,A as K}from"./app-NUBUC0vD.js";import O from"./Create-7ZwdKUL3.js";const P={class:"users-wrapper"},W={class:"page-header mb-8"},X={class:"text-h4 font-weight-bold text-indigo-darken-4 mb-2"},Z={class:"pa-4"},ee={class:"d-flex align-center justify-space-between mb-3"},te={class:"text-h4 font-weight-bold text-indigo-darken-4 mb-1"},se={class:"pa-4"},le={class:"d-flex align-center justify-space-between mb-3"},oe={class:"text-h4 font-weight-bold text-indigo-darken-4 mb-1"},ne={class:"pa-4"},ae={class:"d-flex align-center justify-space-between mb-3"},de={class:"text-h4 font-weight-bold text-indigo-darken-4 mb-1"},ie={class:"pa-4"},re={class:"d-flex align-center justify-space-between mb-3"},ce={class:"text-h4 font-weight-bold text-indigo-darken-4 mb-1"},ue={class:"d-flex align-center"},fe={class:"text-body-1"},me={class:"text-red-darken-2"},ve={class:"card-header pa-6 pb-4"},ge={class:"d-flex align-center justify-space-between flex-wrap ga-4"},_e={class:"text-h6 font-weight-bold text-indigo-darken-4"},pe={class:"d-flex align-center py-3"},xe={class:"font-weight-bold text-indigo-darken-4 text-body-1"},ke={class:"text-caption text-grey-darken-1"},be={key:0,class:"d-flex align-center"},ye={class:"text-indigo-darken-4 font-weight-medium"},we={key:1,class:"text-grey-lighten-1"},he={class:"font-weight-medium"},ze={class:"d-flex ga-2"},Ce={__name:"Index",props:{users:Array,shifts:Array},setup(V){const v=V,x=_(!1),g=_(!1),w=_({}),k=_(null),b=_(""),U=[{key:"fullname",title:"User",sortable:!0},{key:"contact",title:"Contact"},{key:"role",title:"Role",align:"center"},{key:"shift",title:"Shift",align:"center"},{key:"actions",title:"Actions",align:"center",sortable:!1}],I=a=>({1:"red-darken-2",2:"blue-darken-2",3:"purple-darken-2"})[a]||"grey",S=a=>({1:"mdi-shield-crown",2:"mdi-account",3:"mdi-file-search"})[a]||"mdi-account",C=a=>({1:"Admin",2:"Staff",3:"Auditor"})[a]||"Unknown",D=J(()=>{if(!b.value)return v.users;const a=b.value.toLowerCase();return v.users.filter(e=>{var i,m,u,r,f;return((i=e.name)==null?void 0:i.toLowerCase().includes(a))||((m=e.username)==null?void 0:m.toLowerCase().includes(a))||((u=e.contact)==null?void 0:u.toString().includes(a))||((f=(r=e.shift)==null?void 0:r.name)==null?void 0:f.toLowerCase().includes(a))||C(e.role).toLowerCase().includes(a)})}),j=()=>{w.value={},x.value=!0},L=a=>{w.value=a,x.value=!0},N=a=>{k.value=a,g.value=!0},B=()=>{K.delete(route("users.destroy",k.value.id),{onSuccess:()=>{g.value=!1,k.value=null}})};return(a,e)=>{const i=d("v-icon"),m=d("v-btn"),u=d("v-avatar"),r=d("v-chip"),f=d("v-card"),y=d("v-col"),R=d("v-row"),T=d("v-card-title"),h=d("v-divider"),M=d("v-alert"),$=d("v-card-text"),q=d("v-card-actions"),E=d("v-dialog"),Q=d("v-text-field"),Y=d("v-data-table"),F=d("v-container");return p(),z("div",P,[t(F,{class:"py-8 px-6",fluid:""},{default:s(()=>[l("div",W,[l("div",null,[l("h1",X,[t(i,{size:"36",class:"mr-3",color:"indigo-darken-4"},{default:s(()=>[...e[4]||(e[4]=[n("mdi-account-group",-1)])]),_:1}),e[5]||(e[5]=n(" User Management ",-1))]),e[6]||(e[6]=l("p",{class:"text-body-1 text-grey-darken-1"}," Manage system users, their roles ",-1))]),t(m,{color:"indigo-darken-4",size:"large",onClick:j,"prepend-icon":"mdi-plus-circle"},{default:s(()=>[...e[7]||(e[7]=[n(" Add User ",-1)])]),_:1})]),t(R,{class:"mb-8"},{default:s(()=>[t(y,{cols:"12",sm:"6",lg:"3"},{default:s(()=>[t(f,{class:"stat-card elevation-4",rounded:"lg"},{default:s(()=>[l("div",Z,[l("div",ee,[t(u,{color:"indigo-lighten-5",size:"48"},{default:s(()=>[t(i,{size:"28",color:"indigo-darken-4"},{default:s(()=>[...e[8]||(e[8]=[n("mdi-account-check",-1)])]),_:1})]),_:1}),t(r,{color:"success",variant:"flat",size:"small"},{default:s(()=>[...e[9]||(e[9]=[n("Active",-1)])]),_:1})]),l("h3",te,c(v.users.length),1),e[10]||(e[10]=l("p",{class:"text-body-2 text-grey-darken-1"},"Total Users",-1))])]),_:1})]),_:1}),t(y,{cols:"12",sm:"6",lg:"3"},{default:s(()=>[t(f,{class:"stat-card elevation-4",rounded:"lg"},{default:s(()=>[l("div",se,[l("div",le,[t(u,{color:"red-lighten-5",size:"48"},{default:s(()=>[t(i,{size:"28",color:"red-darken-2"},{default:s(()=>[...e[11]||(e[11]=[n("mdi-shield-crown",-1)])]),_:1})]),_:1}),t(r,{color:"red-darken-2",variant:"flat",size:"small"},{default:s(()=>[...e[12]||(e[12]=[n("Admin",-1)])]),_:1})]),l("h3",oe,c(v.users.filter(o=>o.role===1).length),1),e[13]||(e[13]=l("p",{class:"text-body-2 text-grey-darken-1"},"Administrators",-1))])]),_:1})]),_:1}),t(y,{cols:"12",sm:"6",lg:"3"},{default:s(()=>[t(f,{class:"stat-card elevation-4",rounded:"lg"},{default:s(()=>[l("div",ne,[l("div",ae,[t(u,{color:"blue-lighten-5",size:"48"},{default:s(()=>[t(i,{size:"28",color:"blue-darken-2"},{default:s(()=>[...e[14]||(e[14]=[n("mdi-account",-1)])]),_:1})]),_:1}),t(r,{color:"blue-darken-2",variant:"flat",size:"small"},{default:s(()=>[...e[15]||(e[15]=[n("Staff",-1)])]),_:1})]),l("h3",de,c(v.users.filter(o=>o.role===2).length),1),e[16]||(e[16]=l("p",{class:"text-body-2 text-grey-darken-1"},"Staff Members",-1))])]),_:1})]),_:1}),t(y,{cols:"12",sm:"6",lg:"3"},{default:s(()=>[t(f,{class:"stat-card elevation-4",rounded:"lg"},{default:s(()=>[l("div",ie,[l("div",re,[t(u,{color:"purple-lighten-5",size:"48"},{default:s(()=>[t(i,{size:"28",color:"purple-darken-2"},{default:s(()=>[...e[17]||(e[17]=[n("mdi-file-search",-1)])]),_:1})]),_:1}),t(r,{color:"purple-darken-2",variant:"flat",size:"small"},{default:s(()=>[...e[18]||(e[18]=[n("Auditor",-1)])]),_:1})]),l("h3",ce,c(v.users.filter(o=>o.role===3).length),1),e[19]||(e[19]=l("p",{class:"text-body-2 text-grey-darken-1"},"Auditors",-1))])]),_:1})]),_:1})]),_:1}),t(O,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=o=>x.value=o),selectedItem:w.value,shifts:v.shifts},null,8,["modelValue","selectedItem","shifts"]),t(E,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),"max-width":"550",persistent:""},{default:s(()=>[t(f,{rounded:"lg",class:"elevation-24"},{default:s(()=>[t(T,{class:"pa-6 pb-4 bg-red-lighten-5"},{default:s(()=>[l("div",ue,[t(u,{color:"red-darken-2",size:"48",class:"mr-3"},{default:s(()=>[t(i,{size:"28",color:"white"},{default:s(()=>[...e[20]||(e[20]=[n("mdi-alert-circle",-1)])]),_:1})]),_:1}),e[21]||(e[21]=l("div",null,[l("div",{class:"text-h6 font-weight-bold text-red-darken-2"},"Confirm Delete"),l("div",{class:"text-caption text-grey-darken-1"},"This action cannot be undone")],-1))])]),_:1}),t(h),t($,{class:"pa-6"},{default:s(()=>[t(M,{type:"error",variant:"tonal",density:"comfortable",rounded:"lg"},{default:s(()=>{var o;return[l("div",fe,[e[22]||(e[22]=n(" Are you sure you want to delete ",-1)),l("strong",me,c((o=k.value)==null?void 0:o.name),1),e[23]||(e[23]=n("? ",-1))]),e[24]||(e[24]=l("div",{class:"text-body-2 mt-2 text-grey-darken-1"}," All associated data will be permanently removed from the system. ",-1))]}),_:1})]),_:1}),t(h),t(q,{class:"pa-6 justify-end"},{default:s(()=>[t(m,{variant:"outlined",size:"large",onClick:e[1]||(e[1]=o=>g.value=!1),rounded:"lg"},{default:s(()=>[...e[25]||(e[25]=[n(" Cancel ",-1)])]),_:1}),t(m,{color:"red-darken-2",variant:"flat",size:"large",onClick:B,"prepend-icon":"mdi-delete",rounded:"lg",class:"elevation-4"},{default:s(()=>[...e[26]||(e[26]=[n(" Yes, Delete User ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(f,{class:"data-table-card elevation-12",rounded:"lg"},{default:s(()=>[l("div",ve,[l("div",ge,[l("h3",_e,[t(i,{class:"mr-2",size:"28",color:"indigo-darken-4"},{default:s(()=>[...e[27]||(e[27]=[n("mdi-account-multiple",-1)])]),_:1}),e[28]||(e[28]=n(" Users List ",-1))]),t(Q,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),"prepend-inner-icon":"mdi-magnify",label:"Search users",density:"comfortable","hide-details":"",variant:"outlined","bg-color":"white",clearable:"",style:{"max-width":"350px"},class:"elevation-2"},null,8,["modelValue"])])]),t(h),t(Y,{headers:U,items:D.value,class:"custom-data-table","items-per-page":10},{"item.fullname":s(({item:o})=>[l("div",pe,[t(u,{color:"indigo-lighten-5",size:"48",class:"mr-4 elevation-2"},{default:s(()=>[t(i,{color:"indigo-darken-4",size:"24"},{default:s(()=>[...e[29]||(e[29]=[n("mdi-account",-1)])]),_:1})]),_:1}),l("div",null,[l("div",xe,c(o.name),1),l("div",ke,[t(i,{size:"14",class:"mr-1"},{default:s(()=>[...e[30]||(e[30]=[n("mdi-at",-1)])]),_:1}),n(" "+c(o.username),1)])])])]),"item.contact":s(({item:o})=>[o.contact?(p(),z("div",be,[t(r,{color:"indigo-lighten-5",variant:"flat",size:"small","prepend-icon":"mdi-phone"},{default:s(()=>[l("span",ye,c(o.contact),1)]),_:2},1024)])):(p(),z("span",we,"-"))]),"item.role":s(({item:o})=>[t(r,{color:I(o.role),variant:"flat",size:"default",class:"font-weight-bold elevation-2"},{default:s(()=>[t(i,{start:"",size:"16"},{default:s(()=>[n(c(S(o.role)),1)]),_:2},1024),n(" "+c(C(o.role)),1)]),_:2},1032,["color"])]),"item.shift":s(({item:o})=>[o.shift?(p(),A(r,{key:0,color:"indigo-darken-4",variant:"flat",size:"default",class:"elevation-2"},{default:s(()=>[t(i,{start:"",size:"16"},{default:s(()=>[...e[31]||(e[31]=[n("mdi-clock-outline",-1)])]),_:1}),l("span",he,c(o.shift.name),1)]),_:2},1024)):(p(),A(r,{key:1,color:"grey-lighten-2",variant:"flat",size:"small"},{default:s(()=>[...e[32]||(e[32]=[l("span",{class:"text-grey-darken-1"},"No Shift",-1)])]),_:1}))]),"item.actions":s(({item:o})=>[l("div",ze,[t(m,{icon:"mdi-pencil",color:"indigo-darken-4",size:"default",variant:"tonal",onClick:G=>L(o),class:"elevation-2"},null,8,["onClick"]),t(m,{icon:"mdi-delete",color:"red-darken-2",size:"default",variant:"tonal",onClick:G=>N(o),class:"elevation-2"},null,8,["onClick"])])]),_:1},8,["items"])]),_:1})]),_:1})])}}},Ue=H(Ce,[["__scopeId","data-v-839eb95f"]]);export{Ue as default};
