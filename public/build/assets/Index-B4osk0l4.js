import Q from"./Create-Du2ZR3xj.js";import{_ as Y,q as _,x as G,j as p,z as d,g as T,o as y,a as t,w as a,b as l,f as s,t as u,d as k,c as H,A as J}from"./app-NUBUC0vD.js";import{f as w}from"./utility-C4IXQQAA.js";import"./dayjs.min-Do_9EaZr.js";const K={class:"template-wrapper"},O={class:"page-header mb-8"},R={class:"text-h4 font-weight-bold text-indigo-darken-4 mb-2"},W={class:"d-flex align-center"},X={class:"card-header pa-6 pb-4"},Z={class:"d-flex align-center justify-space-between"},ee={class:"text-h6 font-weight-bold text-indigo-darken-4"},te={class:"font-weight-bold text-indigo-darken-4"},ae={class:"d-flex align-center"},oe={class:"font-weight-bold text-indigo-darken-4"},le={class:"text-caption text-medium-emphasis"},ne={class:"font-weight-medium"},se={key:1,class:"text-medium-emphasis"},de={class:"font-weight-bold text-indigo-darken-4 text-h6"},ie={class:"d-flex ga-2"},re={__name:"Index",setup(ue){const v=_(!1),m=_(!1),x=_(null),f=_(null),g=_(""),V=[{key:"id",title:"ID",sortable:!0},{key:"card_name",title:"Card Name",sortable:!0},{key:"no_of_days",title:"Duration",align:"center"},{key:"price",title:"Price",align:"end"},{key:"discount",title:"Discount",align:"center"},{key:"amount",title:"Final Amount",align:"end"},{key:"actions",title:"Actions",align:"center",sortable:!1}],z=G(),c=p(()=>z.props.templates),D=p(()=>{if(!g.value)return c.value;const n=g.value.toLowerCase();return c.value.filter(e=>{var i,r;return((i=e.card_name)==null?void 0:i.toLowerCase().includes(n))||((r=e.no_of_days)==null?void 0:r.toString().includes(n))})});p(()=>c.value.reduce((n,e)=>n+Number(e.amount||0),0)),p(()=>c.value.reduce((n,e)=>n+Number(e.discount||0),0)),p(()=>{if(!c.value.length)return 0;const n=c.value.reduce((e,i)=>e+Number(i.no_of_days||0),0);return Math.round(n/c.value.length)});const N=n=>{x.value=n,v.value=!0},I=n=>{f.value=n,m.value=!0},A=()=>{const n=f.value;J.delete(route("card-template.destroy",n.id),{onSuccess:()=>{m.value=!1,f.value=null}})},B=()=>{x.value=null,v.value=!0};return(n,e)=>{const i=d("v-icon"),r=d("v-btn"),S=d("v-card-title"),b=d("v-divider"),j=d("v-alert"),L=d("v-card-text"),U=d("v-card-actions"),C=d("v-card"),$=d("v-dialog"),q=d("v-text-field"),M=d("v-avatar"),h=d("v-chip"),P=d("v-data-table"),E=d("v-container");return y(),T("div",K,[t(E,{class:"py-8 px-6"},{default:a(()=>[l("div",O,[l("div",null,[l("h1",R,[t(i,{size:"32",class:"mr-2"},{default:a(()=>[...e[4]||(e[4]=[s("mdi-card-text-outline",-1)])]),_:1}),e[5]||(e[5]=s(" Card Templates ",-1))]),e[6]||(e[6]=l("p",{class:"text-body-1 text-medium-emphasis"}," Manage parking card pricing templates ",-1))]),t(r,{color:"indigo-darken-4",size:"large",onClick:B,"prepend-icon":"mdi-plus-circle",class:"add-btn elevation-4"},{default:a(()=>[...e[7]||(e[7]=[s(" Add Template ",-1)])]),_:1})]),t(Q,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),selectedTemplate:x.value},null,8,["modelValue","selectedTemplate"]),t($,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),"max-width":"500",persistent:""},{default:a(()=>[t(C,{rounded:"lg"},{default:a(()=>[t(S,{class:"pa-6 pb-4"},{default:a(()=>[l("div",W,[t(i,{size:"32",color:"error",class:"mr-3"},{default:a(()=>[...e[8]||(e[8]=[s("mdi-alert-circle",-1)])]),_:1}),e[9]||(e[9]=l("span",{class:"text-h6 font-weight-bold"},"Confirm Delete",-1))])]),_:1}),t(b),t(L,{class:"pa-6"},{default:a(()=>[t(j,{type:"error",variant:"tonal",density:"comfortable"},{default:a(()=>{var o;return[e[10]||(e[10]=s(" Are you sure you want to delete ",-1)),l("strong",null,u((o=f.value)==null?void 0:o.card_name),1),e[11]||(e[11]=s("? This action cannot be undone. ",-1))]}),_:1})]),_:1}),t(b),t(U,{class:"pa-4 justify-end"},{default:a(()=>[t(r,{variant:"outlined",onClick:e[1]||(e[1]=o=>m.value=!1)},{default:a(()=>[...e[12]||(e[12]=[s(" Cancel ",-1)])]),_:1}),t(r,{color:"error",variant:"flat",onClick:A},{default:a(()=>[...e[13]||(e[13]=[s(" Yes, Delete Template ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{class:"data-table-card elevation-8",rounded:"lg"},{default:a(()=>[l("div",X,[l("div",Z,[l("h3",ee,[t(i,{class:"mr-2"},{default:a(()=>[...e[14]||(e[14]=[s("mdi-format-list-bulleted",-1)])]),_:1}),e[15]||(e[15]=s(" Templates List ",-1))]),t(q,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=o=>g.value=o),"prepend-inner-icon":"mdi-magnify",label:"Search templates",density:"compact","hide-details":"",variant:"outlined","bg-color":"white",clearable:"",style:{"max-width":"300px"}},null,8,["modelValue"])])]),t(b),t(P,{headers:V,items:D.value,class:"custom-data-table","hide-default-footer":""},{"item.id":a(({item:o})=>[l("span",te,"#"+u(o.id),1)]),"item.card_name":a(({item:o})=>[l("div",ae,[t(M,{color:"indigo-lighten-5",size:"40",class:"mr-3"},{default:a(()=>[t(i,{color:"indigo-darken-4"},{default:a(()=>[...e[16]||(e[16]=[s("mdi-card-text",-1)])]),_:1})]),_:1}),l("div",null,[l("div",oe,u(o.card_name),1),l("div",le,u(o.no_of_days)+" days card",1)])])]),"item.no_of_days":a(({item:o})=>[t(h,{color:"info",variant:"flat",size:"small"},{default:a(()=>[t(i,{start:"",size:"12"},{default:a(()=>[...e[17]||(e[17]=[s("mdi-calendar-range",-1)])]),_:1}),s(" "+u(o.no_of_days)+" days ",1)]),_:2},1024)]),"item.price":a(({item:o})=>[l("span",ne,u(k(w)(o.price)),1)]),"item.discount":a(({item:o})=>[o.discount>0?(y(),H(h,{key:0,color:"success",variant:"flat",size:"small"},{default:a(()=>[t(i,{start:"",size:"12"},{default:a(()=>[...e[18]||(e[18]=[s("mdi-tag",-1)])]),_:1}),s(" "+u(k(w)(o.discount)),1)]),_:2},1024)):(y(),T("span",se,"-"))]),"item.amount":a(({item:o})=>[l("span",de,u(k(w)(o.amount)),1)]),"item.actions":a(({item:o})=>[l("div",ie,[t(r,{icon:"mdi-pencil",color:"indigo-darken-4",size:"small",variant:"tonal",onClick:F=>N(o)},null,8,["onClick"]),t(r,{icon:"mdi-delete",color:"error",size:"small",variant:"tonal",onClick:F=>I(o)},null,8,["onClick"])])]),_:1},8,["items"])]),_:1})]),_:1})])}}},ve=Y(re,[["__scopeId","data-v-9b3b3e63"]]);export{ve as default};
