import{p as J,_ as K,q as g,j as X,H as Y,L as Z,z as c,g as tt,o as et,a as s,w as a,b as e,f as n,t as u}from"./app-NUBUC0vD.js";import{d as L}from"./dayjs.min-Do_9EaZr.js";var j={exports:{}},st=j.exports,q;function at(){return q||(q=1,(function(A,r){(function(f,w){A.exports=w()})(st,(function(){return function(f,w,x){f=f||{};var v=w.prototype,y={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function b(d,p,_,D){return v.fromToBase(d,p,_,D)}x.en.relativeTime=y,v.fromToBase=function(d,p,_,D,M){for(var h,k,T,$=_.$locale().relativeTime||y,C=f.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],N=C.length,i=0;i<N;i+=1){var t=C[i];t.d&&(h=D?x(d).diff(_,t.d,!0):_.diff(d,t.d,!0));var o=(f.rounding||Math.round)(Math.abs(h));if(T=h>0,o<=t.r||!t.r){o<=1&&i>0&&(t=C[i-1]);var l=$[t.l];M&&(o=M(""+o)),k=typeof l=="string"?l.replace("%d",o):l(o,p,t.l,T);break}}if(p)return k;var m=T?$.future:$.past;return typeof m=="function"?m(k):m.replace("%s",k)},v.to=function(d,p){return b(d,p,this,!0)},v.from=function(d,p){return b(d,p,this)};var z=function(d){return d.$u?x.utc():x()};v.toNow=function(d){return this.to(z(this),d)},v.fromNow=function(d){return this.from(z(this),d)}}}))})(j)),j.exports}var ot=at();const it=J(ot),nt={class:"dashboard-wrapper"},rt={class:"dashboard-header mb-8"},lt={class:"text-indigo-darken-4 text-body-1"},dt={class:"kpi-card-content pa-6"},ut={class:"d-flex justify-space-between align-start mb-4"},mt={class:"kpi-icon-wrapper blue-gradient"},ct={class:"kpi-value-section"},pt={class:"kpi-value text-indigo-darken-4 mb-1"},ft={class:"d-flex align-center"},vt={class:"kpi-card-footer"},gt={class:"kpi-card-content pa-6"},_t={class:"d-flex justify-space-between align-start mb-4"},ht={class:"kpi-icon-wrapper green-gradient"},xt={class:"kpi-container d-flex flex-wrap"},bt={class:"kpi-value-section mr-6"},kt={class:"kpi-value text-indigo-darken-4 mb-1"},wt={class:"d-flex align-center"},yt={class:"text-caption text-info font-weight-medium"},zt={class:"text-caption text-info font-weight-medium"},Dt={class:"kpi-card-footer"},Tt={class:"kpi-card-content pa-6"},$t={class:"d-flex justify-space-between align-start mb-4"},Ct={class:"kpi-icon-wrapper amber-gradient"},Nt={class:"kpi-value-section"},Rt={class:"kpi-value text-indigo-darken-4 mb-1"},St={class:"kpi-card-footer"},Mt={class:"chart-header pa-6 pb-4"},Pt={class:"d-flex justify-space-between align-center"},jt={class:"pa-6 pt-4"},At={class:"pa-6"},Ht={class:"stat-item mb-5"},Vt={class:"d-flex align-center justify-space-between mb-2"},Lt={class:"text-subtitle-2 font-weight-bold text-indigo-darken-4"},Et={class:"stat-item mb-5"},It={class:"stat-item mb-5"},Ot={class:"d-flex align-center justify-space-between mb-2"},Bt={class:"text-subtitle-2 font-weight-bold text-indigo-darken-4"},Ft={class:"activity-list"},Ut={class:"activity-item mb-4"},qt={class:"flex-grow-1"},Wt={class:"text-caption text-medium-emphasis"},Qt={class:"activity-item mb-4"},Gt={class:"flex-grow-1"},Jt={class:"text-caption text-medium-emphasis"},Kt={class:"activity-item"},Xt={__name:"Index",props:{activeParkings:Number,totalCards:Number,totalRevenue:Number,revenueData:Array,latestParkin:Object,latestParkout:Object,averageDurationToday:Number,averageDurationFormatted:String,peakHourData:Object},setup(A){const r=A;console.log("Peak hour data:",r.peakHourData),L.extend(it);const f=i=>L(i).fromNow(),w=g(r.activeParkings),x=g(r.totalCards),v=g(r.totalRevenue),y=g(Math.floor(r.totalCards*.05)),b=g("bar"),z=g(""),d=r.revenueData.map(i=>i.date),p=r.revenueData.map(i=>i.total),_=g([{name:"Revenue",data:p}]),D=g({chart:{toolbar:{show:!1},fontFamily:"Roboto, sans-serif",animations:{enabled:!0,easing:"easeinout",speed:800}},colors:["#1A237E"],plotOptions:{bar:{borderRadius:8,columnWidth:"60%",dataLabels:{position:"top"}}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,opacityFrom:.85,opacityTo:.55,stops:[0,100]}},grid:{borderColor:"#E0E0E0",strokeDashArray:4,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},padding:{top:0,right:20,bottom:0,left:10}},xaxis:{categories:d,labels:{style:{colors:"#757575",fontSize:"12px",fontWeight:500}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:i=>"₱"+i.toLocaleString(),style:{colors:"#757575",fontSize:"12px",fontWeight:500}}},tooltip:{theme:"light",y:{formatter:i=>"₱"+i.toLocaleString()},style:{fontSize:"12px"}}}),M=()=>{const i={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date().toLocaleDateString("en-US",i)},h=()=>new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),k=()=>{window.open(route("reports.revenue"),"_blank")},T=i=>{if(!i||isNaN(i))return"N/A";const t=Math.floor(i/1440),o=Math.floor(i%1440/60),l=Math.floor(i%60);return t>0&&o>0&&l>0?`${t}d ${o}h ${l}m`:t>0&&o>0?`${t}d ${o}h`:t>0&&l>0?`${t}d ${l}m`:o>0&&l>0?`${o}h ${l}m`:t>0?`${t}d`:o>0?`${o}h`:`${l}m`},$=i=>{if(i==null)return"N/A";const t=L().hour(i).minute(0),o=t.add(1,"hour");return`${t.format("h A")} - ${o.format("h A")}`},C=X(()=>{var t,o,l;if(!((t=r.peakHourData)!=null&&t.peak)||!((l=(o=r.peakHourData)==null?void 0:o.all)!=null&&l.length))return 0;const i=Math.max(...r.peakHourData.all.map(m=>m.total));return Math.round(r.peakHourData.peak.total/i*100)});let N;return Y(()=>{z.value=h(),N=setInterval(()=>{z.value=h()},6e4)}),Z(()=>{N&&clearInterval(N)}),(i,t)=>{const o=c("v-icon"),l=c("v-chip"),m=c("v-btn"),R=c("v-card"),S=c("v-col"),E=c("v-row"),W=c("v-btn-toggle"),I=c("v-divider"),Q=c("apexchart"),H=c("v-progress-linear"),V=c("v-avatar"),G=c("v-container");return et(),tt("div",nt,[s(G,{class:"py-8 px-6"},{default:a(()=>[e("div",rt,[e("div",null,[t[2]||(t[2]=e("h1",{class:"text-h4 font-weight-bold text-indigo-darken-4 mb-2"}," Dashboard Overview ",-1)),e("p",lt,[s(o,{size:"small",class:"mr-1"},{default:a(()=>[...t[1]||(t[1]=[n("mdi-calendar-today",-1)])]),_:1}),n(" "+u(M()),1)])]),s(l,{color:"white",variant:"flat",size:"large",class:"px-4"},{default:a(()=>[s(o,{start:""},{default:a(()=>[...t[3]||(t[3]=[n("mdi-clock-outline",-1)])]),_:1}),n(" "+u(h()),1)]),_:1})]),s(E,{class:"mb-8"},{default:a(()=>[s(S,{cols:"12",md:"4"},{default:a(()=>[s(R,{class:"kpi-card elevation-2",rounded:"sm",ripple:!1},{default:a(()=>[e("div",dt,[e("div",ut,[e("div",mt,[s(o,{size:"32",color:"white"},{default:a(()=>[...t[4]||(t[4]=[n("mdi-car-multiple",-1)])]),_:1})]),s(l,{size:"small",color:"success",variant:"flat"},{default:a(()=>[s(o,{start:"",size:"12"},{default:a(()=>[...t[5]||(t[5]=[n("mdi-circle",-1)])]),_:1}),t[6]||(t[6]=n(" Live ",-1))]),_:1})]),e("div",ct,[e("h2",pt,u(w.value),1),t[9]||(t[9]=e("p",{class:"kpi-label text-medium-emphasis mb-3"},"Active Parkings",-1)),e("div",ft,[s(o,{size:"16",color:"success",class:"mr-1"},{default:a(()=>[...t[7]||(t[7]=[n("mdi-trending-up",-1)])]),_:1}),t[8]||(t[8]=e("span",{class:"text-caption text-success font-weight-medium"},"12% from yesterday",-1))])])]),e("div",vt,[s(m,{variant:"text",color:"indigo-darken-4",size:"small","append-icon":"mdi-arrow-right"},{default:a(()=>[...t[10]||(t[10]=[n(" View Details ",-1)])]),_:1})])]),_:1})]),_:1}),s(S,{cols:"12",md:"4"},{default:a(()=>[s(R,{class:"kpi-card elevation-2",rounded:"sm",ripple:!1},{default:a(()=>[e("div",gt,[e("div",_t,[e("div",ht,[s(o,{size:"32",color:"white"},{default:a(()=>[...t[11]||(t[11]=[n("mdi-card-account-details",-1)])]),_:1})]),s(l,{size:"small",color:"info",variant:"flat"},{default:a(()=>[s(o,{start:"",size:"12"},{default:a(()=>[...t[12]||(t[12]=[n("mdi-information",-1)])]),_:1}),t[13]||(t[13]=n(" Total ",-1))]),_:1})]),e("div",xt,[e("div",bt,[e("h2",kt,u(x.value.toLocaleString()),1),t[15]||(t[15]=e("p",{class:"kpi-label text-medium-emphasis mb-3"},"Cards Confirmed",-1)),e("div",wt,[s(o,{size:"16",color:"info",class:"mr-1"},{default:a(()=>[...t[14]||(t[14]=[n("mdi-plus-circle",-1)])]),_:1}),e("span",yt,u(y.value)+" new today",1),e("span",zt,u(y.value)+" sold today",1)])])])]),e("div",Dt,[s(m,{variant:"text",color:"indigo-darken-4",size:"small","append-icon":"mdi-arrow-right"},{default:a(()=>[...t[16]||(t[16]=[n(" Manage Cards ",-1)])]),_:1})])]),_:1})]),_:1}),s(S,{cols:"12",md:"4"},{default:a(()=>[s(R,{class:"kpi-card elevation-2",rounded:"sm",ripple:!1},{default:a(()=>[e("div",Tt,[e("div",$t,[e("div",Ct,[s(o,{size:"32",color:"white"},{default:a(()=>[...t[17]||(t[17]=[n("mdi-cash-multiple",-1)])]),_:1})]),s(l,{size:"small",color:"success",variant:"flat"},{default:a(()=>[s(o,{start:"",size:"12"},{default:a(()=>[...t[18]||(t[18]=[n("mdi-trending-up",-1)])]),_:1}),t[19]||(t[19]=n(" +8.2% ",-1))]),_:1})]),e("div",Nt,[e("h2",Rt," ₱"+u(v.value.toLocaleString()),1),t[20]||(t[20]=e("p",{class:"kpi-label text-medium-emphasis mb-3"},"Revenue Today",-1)),t[21]||(t[21]=e("div",{class:"d-flex align-center"},null,-1))])]),e("div",St,[s(m,{variant:"text",color:"indigo-darken-4",size:"small","append-icon":"mdi-arrow-right",onClick:k},{default:a(()=>[...t[22]||(t[22]=[n(" View Report ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1}),s(E,null,{default:a(()=>[s(S,{cols:"12",lg:"8"},{default:a(()=>[s(R,{class:"chart-card elevation-2",rounded:"sm"},{default:a(()=>[e("div",Mt,[e("div",Pt,[t[26]||(t[26]=e("div",null,[e("h3",{class:"text-h6 font-weight-bold text-indigo-darken-4 mb-1"}," Revenue Analytics "),e("p",{class:"text-caption text-medium-emphasis"}," Daily revenue performance over the last 7 days ")],-1)),s(W,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=P=>b.value=P),color:"indigo-darken-4",variant:"outlined",divided:"",density:"compact",mandatory:""},{default:a(()=>[s(m,{value:"bar",size:"small"},{default:a(()=>[s(o,null,{default:a(()=>[...t[23]||(t[23]=[n("mdi-chart-bar",-1)])]),_:1})]),_:1}),s(m,{value:"line",size:"small"},{default:a(()=>[s(o,null,{default:a(()=>[...t[24]||(t[24]=[n("mdi-chart-line",-1)])]),_:1})]),_:1}),s(m,{value:"area",size:"small"},{default:a(()=>[s(o,null,{default:a(()=>[...t[25]||(t[25]=[n("mdi-chart-areaspline",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),s(I),e("div",jt,[s(Q,{type:b.value,height:"320",options:D.value,series:_.value},null,8,["type","options","series"])])]),_:1})]),_:1}),s(S,{cols:"12",lg:"4"},{default:a(()=>[s(R,{class:"stats-card elevation-2",rounded:"sm"},{default:a(()=>{var P,O,B,F,U;return[e("div",At,[t[36]||(t[36]=e("h3",{class:"text-h6 font-weight-bold text-indigo-darken-4 mb-1"}," Quick Statistics ",-1)),t[37]||(t[37]=e("p",{class:"text-caption text-medium-emphasis mb-6"}," Summary of today's activities ",-1)),e("div",Ht,[e("div",Vt,[t[27]||(t[27]=e("span",{class:"text-body-2 text-medium-emphasis"},"Average Duration",-1)),e("span",Lt,u(T(r.averageDurationToday)),1)]),s(H,{"model-value":Math.min(r.averageDurationToday/1440*100,100),color:"indigo-darken-4",height:"8",rounded:""},null,8,["model-value"])]),e("div",Et,[t[28]||(t[28]=e("div",{class:"d-flex align-center justify-space-between mb-2"},[e("span",{class:"text-body-2 text-medium-emphasis"},"Occupancy Rate"),e("span",{class:"text-subtitle-2 font-weight-bold text-indigo-darken-4"},"85%")],-1)),s(H,{"model-value":"85",color:"success",height:"8",rounded:""})]),e("div",It,[e("div",Ot,[t[29]||(t[29]=e("span",{class:"text-body-2 text-medium-emphasis"},"Peak Hours",-1)),e("span",Bt,u((P=r.peakHourData)!=null&&P.peak?$(r.peakHourData.peak.hour):"N/A"),1)]),s(H,{"model-value":C.value,color:"warning",height:"8",rounded:""},null,8,["model-value"])]),s(I,{class:"my-5"}),t[38]||(t[38]=e("h4",{class:"text-subtitle-2 font-weight-bold text-indigo-darken-4 mb-4"}," Recent Activity ",-1)),e("div",Ft,[e("div",Ut,[s(V,{size:"36",color:"success",class:"mr-3"},{default:a(()=>[s(o,{size:"20",color:"white"},{default:a(()=>[...t[30]||(t[30]=[n("mdi-car-arrow-right",-1)])]),_:1})]),_:1}),e("div",qt,[t[31]||(t[31]=e("p",{class:"text-body-2 font-weight-medium mb-0"},"Vehicle checked in",-1)),e("p",Wt,u((O=r.latestParkin)==null?void 0:O.plate_no)+" • "+u(f((B=r.latestParkin)==null?void 0:B.park_datetime)),1)])]),e("div",Qt,[s(V,{size:"36",color:"error",class:"mr-3"},{default:a(()=>[s(o,{size:"20",color:"white"},{default:a(()=>[...t[32]||(t[32]=[n("mdi-car-arrow-left",-1)])]),_:1})]),_:1}),e("div",Gt,[t[33]||(t[33]=e("p",{class:"text-body-2 font-weight-medium mb-0"},"Vehicle checked out",-1)),e("p",Jt,u((F=r.latestParkout)==null?void 0:F.plate_no)+" • "+u(f((U=r.latestParkout)==null?void 0:U.park_out_datetime)),1)])]),e("div",Kt,[s(V,{size:"36",color:"info",class:"mr-3"},{default:a(()=>[s(o,{size:"20",color:"white"},{default:a(()=>[...t[34]||(t[34]=[n("mdi-card-plus",-1)])]),_:1})]),_:1}),t[35]||(t[35]=e("div",{class:"flex-grow-1"},[e("p",{class:"text-body-2 font-weight-medium mb-0"},"New card issued"),e("p",{class:"text-caption text-medium-emphasis"},"Card #1234 • 15 mins ago")],-1))])])])]}),_:1})]),_:1})]),_:1})]),_:1})])}}},te=K(Xt,[["__scopeId","data-v-62c42ca3"]]);export{te as default};
