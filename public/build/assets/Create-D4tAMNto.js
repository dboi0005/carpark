import{_ as H,C as J,D as b,q as K,u as L,j as M,z as n,c as x,o as y,w as s,a as t,b as o,f as d,e as O,i as S,d as l,E as Q,G as W,t as r}from"./app-NUBUC0vD.js";const X={class:"form-header pa-6 pb-4"},Y={class:"d-flex align-center justify-space-between"},Z={class:"d-flex align-center"},ee={class:"input-group"},te={class:"input-label"},se={class:"text-caption"},oe={class:"input-group"},ae={class:"input-label"},le={class:"preview-item"},ne={class:"text-body-2 font-weight-bold"},de={class:"preview-item"},ie={class:"text-body-2 font-weight-bold"},re={class:"preview-item"},ce={class:"text-body-2 font-weight-bold text-success"},ue={class:"preview-item"},me={class:"text-body-2 font-weight-bold text-indigo-darken-4"},pe={class:"pa-4"},_e={class:"d-flex align-center justify-space-between"},ve={class:"text-h5 font-weight-bold text-indigo-darken-4 mb-0"},fe={class:"text-caption text-medium-emphasis mt-2 mb-0"},ge={__name:"Create",props:J({cardTemplate:{type:Array,default:()=>[]}},{modelValue:{type:Boolean,default:!1},modelModifiers:{},loading:{},loadingModifiers:{},progress:{},progressModifiers:{}}),emits:["update:modelValue","update:loading","update:progress"],setup(_){const v=b(_,"modelValue"),w=b(_,"loading"),p=b(_,"progress"),C=_;K(!1);let V=null;const a=L({no_of_cards:null,card_template_id:null,card_name:"",no_of_days:null,price:null,discount:null}),f=M(()=>{const m=Number(a.price)||0,e=Number(a.discount)||0;return(m-e).toFixed(2)}),z=M(()=>{const m=Number(f.value),e=Number(a.no_of_cards)||0;return(m*e).toFixed(2)}),B=()=>a.post(route("card-inventory.store"),{onStart:()=>{w.value=!0,p.value=0,V=setInterval(()=>{p.value<90&&(p.value+=5)},200)},onSuccess:()=>{p.value=100,setTimeout(()=>{v.value=!1,a.reset()},500)},onError:()=>{p.value=100},onFinish:()=>{clearInterval(V),w.value=!1}}),k=()=>{v.value=!1,a.reset()},G=m=>{const e=C.cardTemplate.find(i=>i.id===m);e&&(a.card_name=e.card_name,a.no_of_days=e.no_of_days,a.price=e.price,a.discount=e.discount)};return(m,e)=>{const i=n("v-icon"),N=n("v-avatar"),g=n("v-btn"),T=n("v-divider"),I=n("v-list-item"),j=n("v-select"),c=n("v-col"),q=n("v-text-field"),F=n("v-row"),A=n("v-alert"),E=n("v-chip"),h=n("v-card"),P=n("v-card-text"),U=n("v-spacer"),R=n("v-card-actions"),$=n("v-dialog");return y(),x($,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=u=>v.value=u),"max-width":"600",persistent:""},{default:s(()=>[t(h,{rounded:"lg",class:"card-form"},{default:s(()=>[o("div",X,[o("div",Y,[o("div",Z,[t(N,{color:"indigo-darken-4",size:"48",class:"mr-3"},{default:s(()=>[t(i,{size:"28",color:"white"},{default:s(()=>[...e[4]||(e[4]=[d("mdi-card-plus-outline",-1)])]),_:1})]),_:1}),e[5]||(e[5]=o("div",null,[o("h2",{class:"text-h6 font-weight-bold text-indigo-darken-4"}," Generate Cards "),o("p",{class:"text-caption text-medium-emphasis mb-0"}," Create multiple parking cards from template ")],-1))]),t(g,{icon:"mdi-close",variant:"text",onClick:k})])]),t(T),o("form",{onSubmit:e[2]||(e[2]=O(u=>B(),["prevent"]))},[t(P,{class:"pa-6"},{default:s(()=>[t(F,null,{default:s(()=>[t(c,{cols:"12"},{default:s(()=>[o("div",ee,[o("label",te,[t(i,{size:"18",class:"mr-1"},{default:s(()=>[...e[6]||(e[6]=[d("mdi-card-text-outline",-1)])]),_:1}),e[7]||(e[7]=d(" Select Card Template ",-1))]),t(j,{modelValue:l(a).card_template_id,"onUpdate:modelValue":[e[0]||(e[0]=u=>l(a).card_template_id=u),G],items:C.cardTemplate,"item-title":"card_name","item-value":"id",placeholder:"Choose a template",variant:"outlined",density:"comfortable","prepend-inner-icon":"mdi-format-list-bulleted","hide-details":"auto"},{item:s(({props:u,item:D})=>[t(I,Q(W(u)),{prepend:s(()=>[t(N,{color:"indigo-lighten-5",size:"36"},{default:s(()=>[t(i,{size:"20",color:"indigo-darken-4"},{default:s(()=>[...e[8]||(e[8]=[d("mdi-card-text",-1)])]),_:1})]),_:1})]),subtitle:s(()=>[o("span",se,r(D.raw.no_of_days)+" days - ₱"+r(D.raw.amount),1)]),_:2},1040)]),_:1},8,["modelValue","items"])])]),_:1}),t(c,{cols:"12"},{default:s(()=>[o("div",oe,[o("label",ae,[t(i,{size:"18",class:"mr-1"},{default:s(()=>[...e[9]||(e[9]=[d("mdi-numeric",-1)])]),_:1}),e[10]||(e[10]=d(" Number of Cards to Generate ",-1))]),t(q,{modelValue:l(a).no_of_cards,"onUpdate:modelValue":e[1]||(e[1]=u=>l(a).no_of_cards=u),placeholder:"Enter quantity",variant:"outlined",density:"comfortable",type:"number",min:"1","error-messages":l(a).errors.no_of_cards,"prepend-inner-icon":"mdi-counter","hide-details":"auto"},null,8,["modelValue","error-messages"])])]),_:1}),l(a).card_template_id?(y(),x(c,{key:0,cols:"12"},{default:s(()=>[t(A,{type:"info",variant:"tonal",density:"comfortable",class:"template-preview"},{default:s(()=>[e[19]||(e[19]=o("div",{class:"text-subtitle-2 font-weight-bold mb-2"},"Template Details",-1)),t(F,{dense:""},{default:s(()=>[t(c,{cols:"6",sm:"3"},{default:s(()=>[o("div",le,[t(i,{size:"16",class:"mr-1"},{default:s(()=>[...e[11]||(e[11]=[d("mdi-calendar-range",-1)])]),_:1}),e[12]||(e[12]=o("span",{class:"text-caption text-medium-emphasis"},"Duration:",-1))]),o("div",ne,r(l(a).no_of_days)+" days",1)]),_:1}),t(c,{cols:"6",sm:"3"},{default:s(()=>[o("div",de,[t(i,{size:"16",class:"mr-1"},{default:s(()=>[...e[13]||(e[13]=[d("mdi-cash",-1)])]),_:1}),e[14]||(e[14]=o("span",{class:"text-caption text-medium-emphasis"},"Price:",-1))]),o("div",ie,"₱"+r(Number(l(a).price).toFixed(2)),1)]),_:1}),t(c,{cols:"6",sm:"3"},{default:s(()=>[o("div",re,[t(i,{size:"16",class:"mr-1"},{default:s(()=>[...e[15]||(e[15]=[d("mdi-tag",-1)])]),_:1}),e[16]||(e[16]=o("span",{class:"text-caption text-medium-emphasis"},"Discount:",-1))]),o("div",ce,"₱"+r(Number(l(a).discount).toFixed(2)),1)]),_:1}),t(c,{cols:"6",sm:"3"},{default:s(()=>[o("div",ue,[t(i,{size:"16",class:"mr-1"},{default:s(()=>[...e[17]||(e[17]=[d("mdi-calculator",-1)])]),_:1}),e[18]||(e[18]=o("span",{class:"text-caption text-medium-emphasis"},"Final:",-1))]),o("div",me,"₱"+r(f.value),1)]),_:1})]),_:1})]),_:1})]),_:1})):S("",!0),l(a).card_template_id&&l(a).no_of_cards?(y(),x(c,{key:1,cols:"12"},{default:s(()=>[t(h,{class:"total-preview elevation-0",color:"indigo-lighten-5",rounded:"lg"},{default:s(()=>[o("div",pe,[o("div",_e,[o("div",null,[e[20]||(e[20]=o("p",{class:"text-caption text-medium-emphasis mb-1"},"Total Value",-1)),o("p",ve," ₱"+r(z.value),1)]),t(E,{color:"indigo-darken-4",variant:"flat"},{default:s(()=>[t(i,{start:"",size:"14"},{default:s(()=>[...e[21]||(e[21]=[d("mdi-card-multiple",-1)])]),_:1}),d(" "+r(l(a).no_of_cards)+" cards ",1)]),_:1})]),o("p",fe,r(l(a).no_of_cards)+" × ₱"+r(f.value)+" = ₱"+r(z.value),1)])]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1}),t(T),t(R,{class:"pa-6"},{default:s(()=>[t(U),t(g,{variant:"outlined",size:"large",onClick:k,"prepend-icon":"mdi-close",disabled:l(a).processing},{default:s(()=>[...e[22]||(e[22]=[d(" Cancel ",-1)])]),_:1},8,["disabled"]),t(g,{color:"indigo-darken-4",variant:"flat",size:"large",type:"submit",loading:l(a).processing,disabled:!l(a).card_template_id||!l(a).no_of_cards,"prepend-icon":"mdi-plus-circle"},{default:s(()=>[...e[23]||(e[23]=[d(" Generate Cards ",-1)])]),_:1},8,["loading","disabled"])]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])}}},xe=H(ge,[["__scopeId","data-v-ed58d904"]]);export{xe as default};
