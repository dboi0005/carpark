import{_ as O,C as q,D as G,q as C,u as T,y as H,z as r,c as k,o as w,w as t,a as o,b as s,f as d,t as m,e as J,i as U,d as a,E as K,G as L,m as Q}from"./app-NUBUC0vD.js";const W={class:"form-header pa-6 pb-4"},X={class:"d-flex align-center justify-space-between"},Y={class:"d-flex align-center"},Z={class:"text-h5 font-weight-bold text-indigo-darken-4 mb-1"},ee={class:"text-body-2 text-grey-darken-1 mb-0"},oe={class:"input-group mb-2"},te={class:"input-label text-indigo-darken-4 font-weight-bold mb-2 d-block"},ne={class:"input-group mb-2"},le={class:"input-label text-indigo-darken-4 font-weight-bold mb-2 d-block"},se={class:"input-group mb-2"},de={class:"input-label text-indigo-darken-4 font-weight-bold mb-2 d-block"},ae={class:"input-group mb-2"},re={class:"input-label text-indigo-darken-4 font-weight-bold mb-2 d-block"},ie={class:"d-flex align-center"},ue={class:"input-group mb-2"},ce={class:"input-label text-indigo-darken-4 font-weight-bold mb-2 d-block"},me={class:"d-flex align-center justify-space-between flex-wrap ga-3"},pe={class:"font-weight-bold text-indigo-darken-4 mb-1"},ge={__name:"Create",props:q({selectedItem:{type:Object,default:()=>({})},shifts:{type:Array,default:()=>[]}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(x){const p=G(x,"modelValue"),f=x,u=C(!1),v=C(!1),n=T({name:"",username:"",password:"",role:null,contact:"",shift_id:null}),I=[{id:1,name:"Admin"},{id:2,name:"Staff"},{id:3,name:"Auditor"}],y=i=>({1:"red-darken-2",2:"blue-darken-2",3:"purple-darken-2"})[i]||"grey",V=i=>({1:"mdi-shield-crown",2:"mdi-account",3:"mdi-file-search"})[i]||"mdi-account";H(()=>f.selectedItem,i=>{i&&Object.keys(i).length?(u.value=!0,n.name=i.name,n.username=i.username,n.role=i.role,n.contact=i.contact,n.shift_id=i.shift_id??null):(u.value=!1,n.reset())},{immediate:!0});const E=()=>n.post(route("users.store"),{onSuccess:()=>{n.reset(),p.value=!1}}),N=()=>n.put(route("users.update",f.selectedItem.id),{onSuccess:()=>{p.value=!1}});return(i,e)=>{const c=r("v-icon"),P=r("v-avatar"),_=r("v-btn"),h=r("v-divider"),b=r("v-text-field"),g=r("v-col"),S=r("v-list-item"),M=r("v-select"),R=r("v-alert"),$=r("v-row"),j=r("v-card-text"),B=r("v-spacer"),A=r("v-card-actions"),F=r("v-card"),D=r("v-dialog");return w(),k(D,{modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=l=>p.value=l),"max-width":"700",persistent:"",scrollable:""},{default:t(()=>[o(F,{rounded:"lg",class:"user-form-card elevation-24"},{default:t(()=>[s("div",W,[s("div",X,[s("div",Y,[o(P,{color:u.value?"indigo-darken-3":"indigo-darken-4",size:"48",class:"mr-4 elevation-8"},{default:t(()=>[o(c,{size:"28",color:"white"},{default:t(()=>[d(m(u.value?"mdi-account-edit":"mdi-account-plus"),1)]),_:1})]),_:1},8,["color"]),s("div",null,[s("h2",Z,m(u.value?"Edit User":"Create New User"),1),s("p",ee,m(u.value?"Update user information and settings":"Fill in the details to add a new user"),1)])]),o(_,{icon:"mdi-close",variant:"text",size:"large",color:"grey-darken-2",onClick:e[0]||(e[0]=l=>p.value=!1)})])]),o(h,{class:"border-opacity-100",color:"indigo-lighten-4"}),s("form",{onSubmit:e[9]||(e[9]=J(l=>u.value?N():E(),["prevent"]))},[o(j,{class:"pa-8",style:{"max-height":"600px","overflow-y":"auto"}},{default:t(()=>[o($,null,{default:t(()=>[o(g,{cols:"12"},{default:t(()=>[s("div",oe,[s("label",te,[o(c,{size:"20",class:"mr-2",color:"indigo-darken-4"},{default:t(()=>[...e[11]||(e[11]=[d("mdi-at",-1)])]),_:1}),e[12]||(e[12]=d(" Username ",-1))]),o(b,{modelValue:a(n).username,"onUpdate:modelValue":e[1]||(e[1]=l=>a(n).username=l),placeholder:"Enter username",variant:"outlined",density:"compact","error-messages":a(n).errors.username,"prepend-inner-icon":"mdi-account-circle","hide-details":"auto",rounded:"lg","bg-color":"indigo-lighten-5",color:"indigo-darken-4",onInput:e[2]||(e[2]=l=>a(n).username=a(n).username.replace(/\s+/g,""))},null,8,["modelValue","error-messages"])])]),_:1}),u.value?U("",!0):(w(),k(g,{key:0,cols:"12"},{default:t(()=>[s("div",ne,[s("label",le,[o(c,{size:"20",class:"mr-2",color:"indigo-darken-4"},{default:t(()=>[...e[13]||(e[13]=[d("mdi-lock",-1)])]),_:1}),e[14]||(e[14]=d(" Password ",-1))]),o(b,{modelValue:a(n).password,"onUpdate:modelValue":e[3]||(e[3]=l=>a(n).password=l),placeholder:"Enter password",variant:"outlined",density:"comfortable",type:v.value?"text":"password","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[4]||(e[4]=l=>v.value=!v.value),"error-messages":a(n).errors.password,"prepend-inner-icon":"mdi-lock-outline","hide-details":"auto",rounded:"lg","bg-color":"indigo-lighten-5",color:"indigo-darken-4"},null,8,["modelValue","type","append-inner-icon","error-messages"])])]),_:1})),o(g,{cols:"12"},{default:t(()=>[s("div",se,[s("label",de,[o(c,{size:"20",class:"mr-2",color:"indigo-darken-4"},{default:t(()=>[...e[15]||(e[15]=[d("mdi-account",-1)])]),_:1}),e[16]||(e[16]=d(" Full Name ",-1))]),o(b,{modelValue:a(n).name,"onUpdate:modelValue":e[5]||(e[5]=l=>a(n).name=l),placeholder:"Enter full name",variant:"outlined",density:"comfortable","error-messages":a(n).errors.name,"prepend-inner-icon":"mdi-account-outline","hide-details":"auto",rounded:"lg","bg-color":"indigo-lighten-5",color:"indigo-darken-4"},null,8,["modelValue","error-messages"])])]),_:1}),o(g,{cols:"12",sm:"6"},{default:t(()=>[s("div",ae,[s("label",re,[o(c,{size:"20",class:"mr-2",color:"indigo-darken-4"},{default:t(()=>[...e[17]||(e[17]=[d("mdi-shield-account",-1)])]),_:1}),e[18]||(e[18]=d(" Role ",-1))]),o(M,{modelValue:a(n).role,"onUpdate:modelValue":e[6]||(e[6]=l=>a(n).role=l),items:I,"item-title":"name","item-value":"id",placeholder:"Select role",variant:"outlined",density:"comfortable","prepend-inner-icon":"mdi-shield-check","hide-details":"auto",rounded:"lg","bg-color":"indigo-lighten-5",color:"indigo-darken-4"},{item:t(({props:l,item:z})=>[o(S,K(L(l)),{prepend:t(()=>[o(c,{color:y(z.raw.id)},{default:t(()=>[d(m(V(z.raw.id)),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:t(({item:l})=>[s("div",ie,[o(c,{color:y(l.raw.id),size:"20",class:"mr-2"},{default:t(()=>[d(m(V(l.raw.id)),1)]),_:2},1032,["color"]),d(" "+m(l.title),1)])]),_:1},8,["modelValue"])])]),_:1}),o(g,{cols:"12",sm:"6"},{default:t(()=>[s("div",ue,[s("label",ce,[o(c,{size:"20",class:"mr-2",color:"indigo-darken-4"},{default:t(()=>[...e[19]||(e[19]=[d("mdi-phone",-1)])]),_:1}),e[20]||(e[20]=d(" Contact ",-1))]),o(b,{modelValue:a(n).contact,"onUpdate:modelValue":e[7]||(e[7]=l=>a(n).contact=l),placeholder:"Enter contact number",variant:"outlined",density:"comfortable","error-messages":a(n).errors.contact,"prepend-inner-icon":"mdi-phone-outline","hide-details":"auto",rounded:"lg","bg-color":"indigo-lighten-5",color:"indigo-darken-4"},null,8,["modelValue","error-messages"])])]),_:1}),u.value&&f.selectedItem.id?(w(),k(g,{key:1,cols:"12"},{default:t(()=>[o(R,{type:"info",variant:"tonal",density:"comfortable",rounded:"lg",class:"reset-password-alert elevation-2",border:"start","border-color":"indigo-darken-4"},{default:t(()=>[s("div",me,[s("div",null,[s("div",pe,[o(c,{size:"20",class:"mr-2"},{default:t(()=>[...e[21]||(e[21]=[d("mdi-lock-reset",-1)])]),_:1}),e[22]||(e[22]=d(" Password Management ",-1))]),e[23]||(e[23]=s("div",{class:"text-body-2 text-grey-darken-1"}," Need to change this user's password? ",-1))]),o(a(Q),{href:i.route("users.reset-password.form",{user:f.selectedItem.id})},{default:t(()=>[o(_,{color:"indigo-darken-4",variant:"flat",size:"default","prepend-icon":"mdi-lock-reset",rounded:"lg",class:"elevation-4"},{default:t(()=>[...e[24]||(e[24]=[d(" Reset Password ",-1)])]),_:1})]),_:1},8,["href"])])]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1}),o(h,{class:"border-opacity-100",color:"indigo-lighten-4"}),o(A,{class:"pa-4"},{default:t(()=>[o(B),o(_,{variant:"outlined",size:"x-large",onClick:e[8]||(e[8]=l=>p.value=!1),"prepend-icon":"mdi-close",rounded:"lg",color:"indigo-darken-2",class:"px-6"},{default:t(()=>[...e[25]||(e[25]=[d(" Cancel ",-1)])]),_:1}),o(_,{color:"indigo-darken-4",variant:"flat",size:"x-large",type:"submit",loading:a(n).processing,"prepend-icon":u.value?"mdi-content-save":"mdi-plus-circle",rounded:"lg",class:"elevation-8 px-6"},{default:t(()=>[d(m(u.value?"Update User":"Create User"),1)]),_:1},8,["loading","prepend-icon"])]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])}}},ve=O(ge,[["__scopeId","data-v-7b1f65da"]]);export{ve as default};
