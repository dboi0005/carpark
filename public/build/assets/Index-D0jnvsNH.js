import{d as b}from"./dayjs.min-Do_9EaZr.js";import{_ as et,q as p,j as at,z as i,g as w,o as h,a as s,w as a,b as e,f as n,t as o,d as u,Q as S,c as st,i as lt,F as ot,K as nt,A as dt}from"./app-NUBUC0vD.js";import{f as _,a as j}from"./utility-C4IXQQAA.js";const it={class:"transactions-wrapper"},rt={class:"page-header mb-4"},mt={class:"text-h4 font-weight-bold text-indigo-darken-4 mb-2"},ct={class:"pa-4"},ut={class:"d-flex align-center justify-space-between mb-2"},pt={class:"text-h5 font-weight-bold text-indigo-darken-4"},_t={class:"pa-4"},ft={class:"d-flex align-center justify-space-between mb-2"},vt={class:"text-h5 font-weight-bold text-indigo-darken-4"},yt={class:"pa-4"},gt={class:"d-flex align-center justify-space-between mb-2"},ht={class:"text-h5 font-weight-bold text-indigo-darken-4"},xt={class:"pa-4"},bt={class:"d-flex align-center justify-space-between mb-2"},wt={class:"text-h5 font-weight-bold text-indigo-darken-4"},kt={class:"filters-section pa-6 pb-4"},Ct={class:"font-weight-bold text-indigo-darken-4"},Dt={class:"font-weight-medium"},Tt={class:"font-weight-bold text-indigo-darken-4"},zt={class:"font-weight-medium text-success"},Yt={class:"d-flex align-center justify-center payment-method-cell"},Vt={class:"payment-method-text"},Pt={class:"d-flex align-center"},At={class:"text-body-2"},Nt={class:"summary-row"},Mt={class:"text-left font-weight-bold text-indigo-darken-4"},St={class:"text-right font-weight-bold text-indigo-darken-4"},jt={class:"d-flex align-center justify-space-between"},Ft={class:"d-flex align-center"},Bt={class:"text-h6"},It={class:"mb-6"},Rt={class:"text-h6 font-weight-bold mb-4 text-indigo-darken-4"},Ut={class:"detail-item"},$t={class:"detail-value"},Lt={class:"detail-item"},qt={class:"detail-item"},Et={class:"detail-value font-weight-bold"},Gt={class:"detail-item"},Ht={class:"detail-value font-weight-bold text-indigo-darken-4"},Kt={class:"detail-item"},Ot={class:"detail-value text-success font-weight-bold"},Qt={class:"detail-item"},Jt={class:"d-flex align-center"},Wt={class:"detail-value"},Xt={class:"detail-item"},Zt={class:"detail-value"},te={class:"detail-item"},ee={class:"detail-item"},ae={class:"detail-value"},se={class:"detail-item"},le={class:"detail-value"},oe={key:0},ne={class:"text-h6 font-weight-bold mb-4 text-indigo-darken-4"},de={class:"font-mono"},ie={class:"text-center"},re={class:"text-right"},me={class:"text-right"},ce={class:"text-right font-weight-bold"},ue={key:1},pe={__name:"Index",props:{payments:Array,filters:Object},setup(F){const B=[{key:"id",title:"ID",sortable:!0,width:"80px"},{key:"amount",title:"Amount Received",align:"end",width:"140px"},{key:"total_amount",title:"Total Amount",align:"end",width:"140px"},{key:"change",title:"Change",align:"end",width:"120px"},{key:"payment_type",title:"Source",align:"center",width:"150px"},{key:"payment_method",title:"Payment Method",align:"center",width:"150px"},{key:"status",title:"Status",align:"center",width:"120px"},{key:"paid_at",title:"Date & Time",width:"180px"},{key:"actions",title:"Details",align:"center",width:"100px",sortable:!1}],f=F;b().format("YYYY-MM-DD"),p(""),p("All"),p(10),p(1);const Y=p(f.payments.data||[]);p(!1);const k=p(!1),d=p(null),C=p(f.filters.dateFrom),D=p(f.filters.dateTo),T=p(f.filters.type),I=()=>{dt.get(route("payments.index"),{dateFrom:C.value,dateTo:D.value,type:T.value},{preserveState:!0,replace:!0})},R=()=>{const c=new URLSearchParams({dateFrom:b(C.value).format("YYYY-MM-DD"),dateTo:b(D.value).format("YYYY-MM-DD"),type:T.value||""}).toString();window.open(`${route("reports.transaction.preview")}?${c}`,"_blank")},U=()=>{const c=b().format("YYYY-MM-DD");return f.payments.filter(t=>b(t.paid_at).format("YYYY-MM-DD")===c).length||0},P=c=>{switch(c){case"Card":return"primary";case"Ticket":return"warning";default:return"grey"}},$=c=>{switch(c){case"Card":return"mdi-credit-card";case"Ticket":return"mdi-ticket";default:return"mdi-help"}},A=c=>{switch(c){case"Cash":return"#4caf50";case"Gcash":return"#2196f3";default:return"#9e9e9e"}},L=at(()=>f.payments?f.payments.reduce((c,t)=>c+Number(t.total_amount||0),0):0),q=c=>{d.value=c,k.value=!0},N=()=>{k.value=!1,d.value=null};return(c,t)=>{const m=i("v-icon"),v=i("v-chip"),y=i("v-card"),r=i("v-col"),x=i("v-btn"),V=i("v-row"),M=i("v-date-input"),E=i("v-select"),z=i("v-divider"),G=i("v-tooltip"),H=i("v-data-table"),K=i("v-card-title"),O=i("v-table"),Q=i("v-alert"),J=i("v-card-text"),W=i("v-spacer"),X=i("v-card-actions"),Z=i("v-dialog"),tt=i("v-container");return h(),w("div",it,[s(tt,{class:"py-8 px-6"},{default:a(()=>[e("div",rt,[e("div",null,[e("h1",mt,[s(m,{size:"32",class:"mr-2"},{default:a(()=>[...t[4]||(t[4]=[n("mdi-receipt-text",-1)])]),_:1}),t[5]||(t[5]=n(" Transaction History ",-1))]),t[6]||(t[6]=e("p",{class:"text-body-1 text-medium-emphasis mb-4"}," View all payment transactions and records ",-1))])]),s(V,{class:"mb-6"},{default:a(()=>[s(r,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s(y,{class:"stat-card elevation-4",rounded:"lg"},{default:a(()=>{var l;return[e("div",ct,[e("div",ut,[s(m,{size:"32",color:"success"},{default:a(()=>[...t[7]||(t[7]=[n("mdi-cash-check",-1)])]),_:1}),s(v,{size:"small",color:"success",variant:"flat"},{default:a(()=>[...t[8]||(t[8]=[n("Total",-1)])]),_:1})]),e("h3",pt,o(((l=Y.value.data)==null?void 0:l.filter(g=>g.status==="Paid").length)||0),1),t[9]||(t[9]=e("p",{class:"text-caption text-medium-emphasis"},"Completed Payments",-1))])]}),_:1})]),_:1}),s(r,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s(y,{class:"stat-card elevation-4",rounded:"lg"},{default:a(()=>{var l;return[e("div",_t,[e("div",ft,[s(m,{size:"32",color:"info"},{default:a(()=>[...t[10]||(t[10]=[n("mdi-cash-multiple",-1)])]),_:1}),s(v,{size:"small",color:"info",variant:"flat"},{default:a(()=>[...t[11]||(t[11]=[n("Cash",-1)])]),_:1})]),e("h3",vt,o(((l=Y.value.data)==null?void 0:l.filter(g=>g.payment_type==="Cash").length)||0),1),t[12]||(t[12]=e("p",{class:"text-caption text-medium-emphasis"},"Cash Transactions",-1))])]}),_:1})]),_:1}),s(r,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s(y,{class:"stat-card elevation-4",rounded:"lg"},{default:a(()=>{var l;return[e("div",yt,[e("div",gt,[s(m,{size:"32",color:"primary"},{default:a(()=>[...t[13]||(t[13]=[n("mdi-credit-card",-1)])]),_:1}),s(v,{size:"small",color:"primary",variant:"flat"},{default:a(()=>[...t[14]||(t[14]=[n("Card",-1)])]),_:1})]),e("h3",ht,o(((l=Y.value.data)==null?void 0:l.filter(g=>g.payment_type==="Card").length)||0),1),t[15]||(t[15]=e("p",{class:"text-caption text-medium-emphasis"},"Card Transactions",-1))])]}),_:1})]),_:1}),s(r,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s(y,{class:"stat-card elevation-4",rounded:"lg"},{default:a(()=>[e("div",xt,[e("div",bt,[s(m,{size:"32",color:"warning"},{default:a(()=>[...t[16]||(t[16]=[n("mdi-calendar-today",-1)])]),_:1}),s(x,{variant:"text",color:"indigo-darken-4",size:"small","append-icon":"mdi-arrow-right",onClick:R},{default:a(()=>[...t[17]||(t[17]=[n(" View Report ",-1)])]),_:1})]),e("h3",wt,o(U()),1),t[18]||(t[18]=e("p",{class:"text-caption text-medium-emphasis"},"Today's Transactions",-1))])]),_:1})]),_:1})]),_:1}),s(y,{class:"data-table-card elevation-8",rounded:"lg"},{default:a(()=>[e("div",kt,[s(V,{align:"center"},{default:a(()=>[s(r,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s(M,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=l=>C.value=l),"prepend-icon":"",label:"Date From","prepend-inner-icon":"$calendar",density:"comfortable","hide-details":"auto",variant:"outlined","bg-color":"white"},null,8,["modelValue"])]),_:1}),s(r,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s(M,{modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=l=>D.value=l),"prepend-icon":"",label:"Date To","prepend-inner-icon":"$calendar",density:"comfortable","hide-details":"auto",variant:"outlined","bg-color":"white"},null,8,["modelValue"])]),_:1}),s(r,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s(E,{modelValue:T.value,"onUpdate:modelValue":t[2]||(t[2]=l=>T.value=l),items:["All","Ticket","Card"],label:"Payment Type",density:"comfortable",variant:"outlined","bg-color":"white","hide-details":""},null,8,["modelValue"])]),_:1}),s(r,{cols:"12",md:"2"},{default:a(()=>[s(x,{color:"indigo-darken-4",size:"large",block:"",onClick:I,"prepend-icon":"mdi-magnify"},{default:a(()=>[...t[19]||(t[19]=[n(" Search ",-1)])]),_:1})]),_:1})]),_:1})]),s(z),s(H,{headers:B,items:f.payments,"hide-default-footer":"","items-per-page":f.payments.length,class:"custom-data-table"},{"item.id":a(({item:l})=>[e("span",Ct,"#"+o(l.id),1)]),"item.amount":a(({item:l})=>[e("span",Dt,o(u(_)(l.amount)),1)]),"item.total_amount":a(({item:l})=>[e("span",Tt,o(u(_)(l.total_amount)),1)]),"item.change":a(({item:l})=>[e("span",zt,o(u(_)(l.change)),1)]),"item.payment_type":a(({item:l})=>[s(v,{color:P(l.payment_type),variant:"flat",size:"small",class:"font-weight-medium payment-type-chip"},{default:a(()=>[s(m,{start:"",size:"12"},{default:a(()=>[n(o($(l.payment_type)),1)]),_:2},1024),n(" "+o(l.payment_type),1)]),_:2},1032,["color"])]),"item.payment_method":a(({item:l})=>[e("div",Yt,[e("span",{class:"payment-method-dot mr-2",style:S({backgroundColor:A(l.payment_method)})},null,4),e("span",Vt,o(l.payment_method||"N/A"),1)])]),"item.status":a(({item:l})=>[s(v,{color:l.status==="Paid"?"success":"error",variant:"flat",size:"small",class:"font-weight-medium"},{default:a(()=>[s(m,{start:"",size:"12"},{default:a(()=>[n(o(l.status==="Paid"?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1024),n(" "+o(l.status),1)]),_:2},1032,["color"])]),"item.paid_at":a(({item:l})=>[e("div",Pt,[s(m,{size:"16",class:"mr-1 text-medium-emphasis"},{default:a(()=>[...t[20]||(t[20]=[n("mdi-calendar",-1)])]),_:1}),e("span",At,o(u(j)(l.paid_at)),1)])]),"item.actions":a(({item:l})=>[s(x,{icon:"",variant:"text",color:"indigo-darken-4",size:"small",onClick:g=>q(l)},{default:a(()=>[s(m,null,{default:a(()=>[...t[21]||(t[21]=[n("mdi-eye",-1)])]),_:1}),s(G,{activator:"parent",location:"top"},{default:a(()=>[...t[22]||(t[22]=[n("View Details",-1)])]),_:1})]),_:2},1032,["onClick"])]),"body.append":a(()=>[e("tr",Nt,[e("td",Mt,[s(m,{class:"mr-2"},{default:a(()=>[...t[23]||(t[23]=[n("mdi-calculator",-1)])]),_:1}),t[24]||(t[24]=n(" Total Summary: ",-1))]),t[25]||(t[25]=e("td",null,null,-1)),e("td",St,o(u(_)(L.value)),1)])]),_:1},8,["items","items-per-page"])]),_:1}),s(Z,{modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=l=>k.value=l),"max-width":"800px",scrollable:""},{default:a(()=>[s(y,null,{default:a(()=>[s(K,{class:"pa-4 bg-indigo-darken-4 text-white"},{default:a(()=>{var l;return[e("div",jt,[e("div",Ft,[s(m,{class:"mr-2"},{default:a(()=>[...t[26]||(t[26]=[n("mdi-receipt-text",-1)])]),_:1}),e("span",Bt,"Payment Details - #"+o((l=d.value)==null?void 0:l.id),1)]),s(x,{icon:"",variant:"text",onClick:N,color:"white"},{default:a(()=>[s(m,null,{default:a(()=>[...t[27]||(t[27]=[n("mdi-close",-1)])]),_:1})]),_:1})])]}),_:1}),s(z),d.value?(h(),st(J,{key:0,class:"pa-6"},{default:a(()=>[e("div",It,[e("h3",Rt,[s(m,{class:"mr-2"},{default:a(()=>[...t[28]||(t[28]=[n("mdi-information",-1)])]),_:1}),t[29]||(t[29]=n(" Payment Summary ",-1))]),s(V,null,{default:a(()=>[s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",Ut,[t[30]||(t[30]=e("span",{class:"detail-label"},"Customer:",-1)),e("span",$t,o(d.value.customer||"N/A"),1)])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",Lt,[t[31]||(t[31]=e("span",{class:"detail-label"},"Source:",-1)),s(v,{color:P(d.value.payment_type),variant:"flat",size:"small",class:"ml-2"},{default:a(()=>[n(o(d.value.payment_type),1)]),_:1},8,["color"])])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",qt,[t[32]||(t[32]=e("span",{class:"detail-label"},"Amount Received:",-1)),e("span",Et,o(u(_)(d.value.amount)),1)])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",Gt,[t[33]||(t[33]=e("span",{class:"detail-label"},"Total Amount:",-1)),e("span",Ht,o(u(_)(d.value.total_amount)),1)])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",Kt,[t[34]||(t[34]=e("span",{class:"detail-label"},"Change:",-1)),e("span",Ot,o(u(_)(d.value.change)),1)])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",Qt,[t[35]||(t[35]=e("span",{class:"detail-label"},"Payment Method:",-1)),e("div",Jt,[e("span",{class:"payment-method-dot mr-2",style:S({backgroundColor:A(d.value.payment_method)})},null,4),e("span",Wt,o(d.value.payment_method||"N/A"),1)])])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",Xt,[t[36]||(t[36]=e("span",{class:"detail-label"},"Days Deducted:",-1)),e("span",Zt,o(d.value.days_deducted||0)+" days",1)])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",te,[t[37]||(t[37]=e("span",{class:"detail-label"},"Status:",-1)),s(v,{color:d.value.status==="Paid"?"success":"error",variant:"flat",size:"small",class:"ml-2"},{default:a(()=>[n(o(d.value.status),1)]),_:1},8,["color"])])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",ee,[t[38]||(t[38]=e("span",{class:"detail-label"},"Processed By:",-1)),e("span",ae,o(d.value.user.name||"N/A"),1)])]),_:1}),s(r,{cols:"12",sm:"6"},{default:a(()=>[e("div",se,[t[39]||(t[39]=e("span",{class:"detail-label"},"Payment Date:",-1)),e("span",le,o(u(j)(d.value.paid_at)),1)])]),_:1})]),_:1})]),s(z,{class:"my-6"}),d.value.details&&d.value.details.length>0?(h(),w("div",oe,[e("h3",ne,[s(m,{class:"mr-2"},{default:a(()=>[...t[40]||(t[40]=[n("mdi-credit-card-outline",-1)])]),_:1}),t[41]||(t[41]=n(" Card Payment Details ",-1))]),s(O,{class:"details-table"},{default:a(()=>[t[42]||(t[42]=e("thead",null,[e("tr",null,[e("th",null,"Card Name"),e("th",null,"Card Number"),e("th",{class:"text-center"},"No. of Days"),e("th",{class:"text-right"},"Discount"),e("th",{class:"text-right"},"Balance"),e("th",{class:"text-right"},"Amount")])],-1)),e("tbody",null,[(h(!0),w(ot,null,nt(d.value.details,l=>(h(),w("tr",{key:l.id},[e("td",null,o(l.card_name||"N/A"),1),e("td",null,[e("span",de,o(l.card_number||"N/A"),1)]),e("td",ie,o(l.no_of_days||0),1),e("td",re,o(u(_)(l.discount)),1),e("td",me,o(u(_)(l.balance)),1),e("td",ce,o(u(_)(l.amount)),1)]))),128))])]),_:1})])):(h(),w("div",ue,[s(Q,{type:"info",variant:"tonal",class:"mt-4"},{default:a(()=>[s(m,{class:"mr-2"},{default:a(()=>[...t[43]||(t[43]=[n("mdi-information",-1)])]),_:1}),t[44]||(t[44]=n(" No additional card payment details available for this transaction. ",-1))]),_:1})]))]),_:1})):lt("",!0),s(z),s(X,{class:"pa-4"},{default:a(()=>[s(W),s(x,{color:"indigo-darken-4",variant:"flat",onClick:N},{default:a(()=>[...t[45]||(t[45]=[n(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}},ye=et(pe,[["__scopeId","data-v-991299f8"]]);export{ye as default};
