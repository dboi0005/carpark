import{_ as I,C as q,D as G,q as R,u as J,y as K,z as d,c as x,o as y,w as i,a as s,b as o,f as r,t as p,e as L,i as E,d as a,E as Q,G as W,V as X}from"./app-NUBUC0vD.js";import{d as S}from"./dayjs.min-Do_9EaZr.js";const Y={class:"form-header pa-6 pb-4"},Z={class:"d-flex align-center justify-space-between"},ee={class:"d-flex align-center"},te={class:"text-h6 font-weight-bold text-indigo-darken-4"},se={class:"text-caption text-medium-emphasis mb-0"},ie={class:"input-group"},oe={class:"input-label"},le={class:"input-group"},ae={class:"input-label"},ne={class:"input-group"},de={class:"input-label"},re={class:"d-flex align-center justify-space-between"},me={class:"text-body-2"},ue={class:"input-group"},ce={class:"input-label"},_e={class:"pa-4"},pe={class:"d-flex align-center justify-space-between"},fe={class:"text-subtitle-2 font-weight-bold mb-1"},ve={class:"text-caption text-medium-emphasis mb-0"},ge={class:"input-group"},be={class:"input-label"},he={__name:"ShiftFormDialog",props:q({selectedShift:{type:Object,default:null},availableUsers:{type:Array,default:()=>[]}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const v=G(f,"modelValue"),V=f,c=R(!1),t=J({name:"",start_time:"",end_time:"",is_active:!0,user_ids:[]}),N=()=>{if(!t.start_time||!t.end_time)return"";const l=S(`2000-01-01 ${t.start_time}`);let e=S(`2000-01-01 ${t.end_time}`);e.isBefore(l)&&(e=e.add(1,"day"));const m=e.diff(l,"hour"),u=e.diff(l,"minute")%60;return m===0?`${u} minutes`:u===0?`${m} hours`:`${m} hours ${u} minutes`};K(()=>V.selectedShift,l=>{var e,m,u;l&&Object.keys(l).length?(c.value=!0,t.name=l.name,t.start_time=((e=l.start_time)==null?void 0:e.slice(0,5))||"",t.end_time=((m=l.end_time)==null?void 0:m.slice(0,5))||"",t.is_active=l.is_active,t.user_ids=((u=l.users)==null?void 0:u.map(g=>g.id))||[]):(c.value=!1,t.reset(),t.is_active=!0)},{immediate:!0});const b=l=>l?S(`2000-01-01 ${l}`).format("HH:mm"):null,k=()=>{t.start_time=b(t.start_time),t.end_time=b(t.end_time),t.post(route("shift.store"),{onSuccess:()=>{t.reset(),t.is_active=!0,v.value=!1},onError:l=>{console.log(l)}})},w=()=>{t.start_time=b(t.start_time),t.end_time=b(t.end_time),t.put(route("shifts.update",V.selectedShift.id),{onSuccess:()=>{v.value=!1},onError:l=>{console.log(l)}})},z=()=>{t.reset(),t.is_active=!0,v.value=!1};return(l,e)=>{const m=d("v-icon"),u=d("v-avatar"),g=d("v-btn"),U=d("v-divider"),h=d("v-text-field"),_=d("v-col"),C=d("v-alert"),j=d("v-switch"),$=d("v-card"),M=d("v-chip"),T=d("v-list-item"),B=d("v-select"),A=d("v-row"),F=d("v-card-text"),O=d("v-spacer"),P=d("v-card-actions"),H=d("v-dialog");return y(),x(H,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=n=>v.value=n),"max-width":"700",persistent:""},{default:i(()=>[s($,{rounded:"lg",class:"shift-form-card"},{default:i(()=>[o("div",Y,[o("div",Z,[o("div",ee,[s(u,{color:"indigo-darken-4",size:"48",class:"mr-3"},{default:i(()=>[s(m,{size:"28",color:"white"},{default:i(()=>[r(p(c.value?"mdi-clock-edit":"mdi-clock-plus"),1)]),_:1})]),_:1}),o("div",null,[o("h2",te,p(c.value?"Edit Shift":"Create New Shift"),1),o("p",se,p(c.value?"Update shift information and schedule":"Set up work shift details"),1)])]),s(g,{icon:"mdi-close",variant:"text",onClick:z})])]),s(U),o("form",{onSubmit:e[6]||(e[6]=L(n=>c.value?w():k(),["prevent"]))},[s(F,{class:"pa-6"},{default:i(()=>[s(A,null,{default:i(()=>[s(_,{cols:"12"},{default:i(()=>[o("div",ie,[o("label",oe,[s(m,{size:"18",class:"mr-1"},{default:i(()=>[...e[8]||(e[8]=[r("mdi-clock-outline",-1)])]),_:1}),e[9]||(e[9]=r(" Shift Name ",-1))]),s(h,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=n=>a(t).name=n),placeholder:"Enter shift name (e.g., Morning Shift)",variant:"outlined",density:"comfortable","error-messages":a(t).errors.name,"prepend-inner-icon":"mdi-label","hide-details":"auto"},null,8,["modelValue","error-messages"])])]),_:1}),s(_,{cols:"12",sm:"6"},{default:i(()=>[o("div",le,[o("label",ae,[s(m,{size:"18",class:"mr-1"},{default:i(()=>[...e[10]||(e[10]=[r("mdi-clock-start",-1)])]),_:1}),e[11]||(e[11]=r(" Start Time ",-1))]),s(h,{modelValue:a(t).start_time,"onUpdate:modelValue":e[1]||(e[1]=n=>a(t).start_time=n),type:"time",placeholder:"Select start time",variant:"outlined",density:"comfortable","error-messages":a(t).errors.start_time,"prepend-inner-icon":"mdi-clock-in","hide-details":"auto"},null,8,["modelValue","error-messages"])])]),_:1}),s(_,{cols:"12",sm:"6"},{default:i(()=>[o("div",ne,[o("label",de,[s(m,{size:"18",class:"mr-1"},{default:i(()=>[...e[12]||(e[12]=[r("mdi-clock-end",-1)])]),_:1}),e[13]||(e[13]=r(" End Time ",-1))]),s(h,{modelValue:a(t).end_time,"onUpdate:modelValue":e[2]||(e[2]=n=>a(t).end_time=n),type:"time",placeholder:"Select end time",variant:"outlined",density:"comfortable","error-messages":a(t).errors.end_time,"prepend-inner-icon":"mdi-clock-out","hide-details":"auto"},null,8,["modelValue","error-messages"])])]),_:1}),a(t).start_time&&a(t).end_time?(y(),x(_,{key:0,cols:"12"},{default:i(()=>[s(C,{type:"info",variant:"tonal",density:"compact",class:"duration-preview"},{default:i(()=>[o("div",re,[o("div",null,[e[14]||(e[14]=o("div",{class:"text-subtitle-2 font-weight-bold mb-1"},"Shift Duration",-1)),o("div",me,p(N()),1)]),s(m,{size:"32",color:"info"},{default:i(()=>[...e[15]||(e[15]=[r("mdi-clock-time-eight",-1)])]),_:1})])]),_:1})]),_:1})):E("",!0),s(_,{cols:"12"},{default:i(()=>[o("div",ue,[o("label",ce,[s(m,{size:"18",class:"mr-1"},{default:i(()=>[...e[16]||(e[16]=[r("mdi-toggle-switch",-1)])]),_:1}),e[17]||(e[17]=r(" Status ",-1))]),s($,{class:"status-card elevation-0",rounded:"lg"},{default:i(()=>[o("div",_e,[o("div",pe,[o("div",null,[o("p",fe,p(a(t).is_active?"Active Shift":"Inactive Shift"),1),o("p",ve,p(a(t).is_active?"This shift is available for assignment":"This shift is hidden and cannot be assigned"),1)]),s(j,{modelValue:a(t).is_active,"onUpdate:modelValue":e[3]||(e[3]=n=>a(t).is_active=n),color:"success","hide-details":"",inset:""},null,8,["modelValue"])])])]),_:1})])]),_:1}),f.availableUsers&&f.availableUsers.length?(y(),x(_,{key:1,cols:"12"},{default:i(()=>[o("div",ge,[o("label",be,[s(m,{size:"18",class:"mr-1"},{default:i(()=>[...e[18]||(e[18]=[r("mdi-account-multiple",-1)])]),_:1}),e[19]||(e[19]=r(" Assign Staff (Optional) ",-1))]),s(B,{modelValue:a(t).user_ids,"onUpdate:modelValue":e[4]||(e[4]=n=>a(t).user_ids=n),items:f.availableUsers,"item-title":"name","item-value":"id",placeholder:"Select staff members",variant:"outlined",density:"comfortable",multiple:"",chips:"","closable-chips":"","prepend-inner-icon":"mdi-account-group","hide-details":"auto"},{chip:i(({props:n,item:D})=>[s(M,X(n,{text:D.title,color:"indigo-lighten-5"}),{prepend:i(()=>[s(u,{color:"indigo-darken-4",size:"24"},{default:i(()=>[s(m,{size:"14",color:"white"},{default:i(()=>[...e[20]||(e[20]=[r("mdi-account",-1)])]),_:1})]),_:1})]),_:2},1040,["text"])]),item:i(({props:n,item:D})=>[s(T,Q(W(n)),{prepend:i(()=>[s(u,{color:"indigo-lighten-5",size:"36"},{default:i(()=>[s(m,{size:"20",color:"indigo-darken-4"},{default:i(()=>[...e[21]||(e[21]=[r("mdi-account",-1)])]),_:1})]),_:1})]),_:2},1040)]),_:1},8,["modelValue","items"])])]),_:1})):E("",!0),s(_,{cols:"12"},{default:i(()=>[s(C,{type:"success",variant:"tonal",density:"compact",class:"info-note"},{default:i(()=>[...e[22]||(e[22]=[o("div",{class:"text-caption"},[o("strong",null,"Note:"),r(" Staff members can be assigned to multiple shifts. Make sure the shift times don't overlap with their other assignments. ")],-1)])]),_:1})]),_:1})]),_:1})]),_:1}),s(U),s(P,{class:"pa-6"},{default:i(()=>[s(O),s(g,{variant:"outlined",size:"large",onClick:z,"prepend-icon":"mdi-close",disabled:a(t).processing},{default:i(()=>[...e[23]||(e[23]=[r(" Cancel ",-1)])]),_:1},8,["disabled"]),s(g,{color:"indigo-darken-4",variant:"flat",size:"large",type:"submit",onClick:e[5]||(e[5]=n=>c.value?w():k()),loading:a(t).processing,"prepend-icon":c.value?"mdi-content-save":"mdi-plus-circle"},{default:i(()=>[r(p(c.value?"Update Shift":"Create Shift"),1)]),_:1},8,["loading","prepend-icon"])]),_:1})],32)]),_:1})]),_:1},8,["modelValue"])}}},Se=I(he,[["__scopeId","data-v-4ba0037f"]]);export{Se as default};
